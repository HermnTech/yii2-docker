version: '2'

services:

  php-5.6-apache:
    build: ../5.6/apache
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-5.6-fpm:
    build: ../5.6/fpm
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-5.6-fpm-alpine:
    build: ../5.6/fpm-alpine
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.0-apache:
    build: ../7.0/apache
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.0-fpm:
    build: ../7.0/fpm
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.0-fpm-alpine:
    build: ../7.0/fpm-alpine
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.1-apache:
    build: ../7.1/apache
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.1-fpm:
    build: ../7.1/fpm
    extends:
      service: php-build
      file: docker-compose.base.yml

  php-7.1-fpm-alpine:
    build: ../7.1/fpm-alpine
    extends:
      service: php-build
      file: docker-compose.base.yml

# prevent overlapping/duplicated networks, since docker assigns /16 subnets by default ranging from 10.x over 172.x to 192.168.x
networks:
  default:
    ipam:
      driver: default
      config:
        - subnet: 10.100.1${COMPOSE_NETWORK_TUPLE_C}.1/24